(this.webpackJsonpmj=this.webpackJsonpmj||[]).push([[0],{104:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(19),i=n.n(a),o=(n(81),n(114)),d=n(115),j=n(111),s=n(64),l=n(11),u=n(12),b=n.n(u),h=n(27),O=n(18),x=n(73),p=n(113),m=n(72),f=n(74),y=n(40),g=n(28),v=n(67),C=n(112),A=n(60),k=n(75),D=n(71),S=n(47),w=(n(105),n(84),n(3));0===S.a.apps.length&&S.a.initializeApp({apiKey:"AIzaSyBB1VQeCU12rjy_e6Lr2DREmXtvEc5ZoRI",authDomain:"money-journey-jiahuiouyang.firebaseapp.com",databaseUrl:"https://money-journey-jiahuiouyang-default-rtdb.firebaseio.com/",projectId:"money-journey-jiahuiouyang",storageBucket:"money-journey-jiahuiouyang.appspot.com",messagingSenderId:"224576104559",appId:"1:224576104559:web:51c21d53cd9b3c4d2fc59a"});var F=S.a.firestore(),I=(S.a.auth(),[{id:0,name:"-- All --"},{id:1,name:"Food"},{id:2,name:"Fun"},{id:3,name:"Transportation"},{id:4,name:"Uncategorised"}]);function E(){var e=Object(c.useState)(),t=Object(O.a)(e,2),n=t[0],r=t[1],a=Object(k.a)(),i=a.register,o=a.handleSubmit,d=Object(c.useState)(!1),j=Object(O.a)(d,2),s=j[0],l=j[1],u=Object(c.useState)([]),S=Object(O.a)(u,2),E=S[0],T=S[1],B=Object(c.useState)(0),R=Object(O.a)(B,2),M=R[0],J=R[1],V=Object(c.useState)(!1),P=Object(O.a)(V,2),q=P[0],N=P[1],U=Object(c.useState)({id:null,createdAt:new Date,description:"",amount:0,category:I[0]}),_=Object(O.a)(U,2),H=_[0],z=_[1],K=F.collection("money"),G=K.orderBy("createdAt","asc").limitToLast(100),Q=Object(D.a)(G,{idField:"id"}),X=Object(O.a)(Q,1)[0];console.log("REACT_APP_PROJECT_ID","money-journey-jiahuiouyang"),Object(c.useEffect)((function(){if(X){var e=0,t=X.map((function(t,n){return e+=t.amount,Object(w.jsx)(L,{data:t,i:n,onDeleteClick:Y,onEditClick:$})}));T(t),J(e)}}),[X]);var Z=function(){z({id:null,createdAt:new Date,description:"",amount:0,category:I[0]}),r({}),l(!1),N(!1)},W=function(){var e=Object(h.a)(b.a.mark((function e(t){var c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c={description:t.description,amount:parseFloat(t.amount),createdAt:new Date(t.createdAt),category:n},console.log("onSubmit",c),!q){e.next=8;break}return console.log("UPDATING!!!!",t.id),e.next=6,K.doc(t.id).set(c).then((function(){return console.log("moneyRef has been set")})).catch((function(e){console.error("Error: ",e),alert(e)}));case 6:e.next=10;break;case 8:return e.next=10,K.add(c).then((function(){return console.log("New record has been added.")})).catch((function(e){console.error("Errror:",e),alert(e)}));case 10:Z();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(e){console.log("handleDeleteClick in Journal id:",e),window.confirm("Are you sure to delete this record?")&&K.doc(e).delete()},$=function(e){var t={id:e.id,description:e.description,amount:parseFloat(e.amount),createdAt:e.createdAt.toDate(),category:n};console.log("handleEditClick",t),z(t),r(e.category),l(!0),N(!0)};return Object(w.jsxs)(m.a,{children:[Object(w.jsxs)(y.a,{children:[Object(w.jsxs)(g.a,{children:[Object(w.jsx)("h1",{children:"Journal"}),Object(w.jsxs)(x.a,{variant:"outline-dark",onClick:function(){return l(!0)},children:[Object(w.jsx)(A.b,{})," Add"]})]}),Object(w.jsxs)(g.a,{children:["Category:",Object(w.jsx)(v.a,{options:I,getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id},onChange:function(e){if(console.log("filter",e),X){var t=0,n=X.filter((function(t){return 0==e.id||t.category.id==e.id})).map((function(e,n){return console.log("filter",e),t+=e.amount,Object(w.jsx)(L,{data:e,i:n})}));T(n),J(t)}}})]})]}),Object(w.jsxs)(f.a,{striped:!0,bordered:!0,hover:!0,variant:"dark",children:[Object(w.jsx)("thead",{children:Object(w.jsxs)("tr",{children:[Object(w.jsx)("th",{children:"#"}),Object(w.jsx)("th",{children:"Date"}),Object(w.jsx)("th",{children:"Description"}),Object(w.jsx)("th",{children:"Category"}),Object(w.jsx)("th",{children:"Amount"})]})}),Object(w.jsx)("tbody",{children:E}),Object(w.jsx)("tfooter",{children:Object(w.jsx)("td",{colSpan:5,children:Object(w.jsxs)("h2",{children:["Total: ",M]})})})]}),Object(w.jsx)(p.a,{show:s,onHide:Z,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:Object(w.jsxs)("form",{onSubmit:o(W),children:[Object(w.jsx)("input",{type:"hidden",placeholder:"ID",ref:i({required:!1}),name:"id",id:"id",defaultValue:H.id}),Object(w.jsx)(p.a.Header,{closeButton:!0,children:Object(w.jsx)(p.a.Title,{children:q?"Edit Record":"Add New Record"})}),Object(w.jsxs)(p.a.Body,{children:[Object(w.jsxs)(y.a,{children:[Object(w.jsx)(g.a,{children:Object(w.jsx)("label",{htmlFor:"createdAt",children:"Date"})}),Object(w.jsx)(g.a,{children:Object(w.jsx)("input",{type:"date",placeholder:"Date",ref:i({required:!0}),name:"createdAt",id:"createdAt",defaultValue:Object(C.a)(H.createdAt,"yyyy-MM-dd")})})]}),Object(w.jsxs)(y.a,{children:[Object(w.jsx)(g.a,{children:Object(w.jsx)("label",{htmlFor:"category",children:"Category"})}),Object(w.jsx)(g.a,{children:Object(w.jsx)(v.a,{id:"category",name:"category",value:n,placeholder:"Category",options:I.filter((function(e){return 0!=e.id})),onChange:function(e){console.log("handleCategoryChange",e),r(e)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}})})]}),Object(w.jsxs)(y.a,{children:[Object(w.jsx)(g.a,{children:Object(w.jsx)("label",{htmlFor:"description",children:"Description"})}),Object(w.jsx)(g.a,{children:Object(w.jsx)("input",{type:"text",placeholder:"Description",ref:i({required:!0}),name:"description",id:"description",defaultValue:H.description})})]}),Object(w.jsxs)(y.a,{children:[Object(w.jsx)(g.a,{children:Object(w.jsx)("label",{htmlFor:"amount",children:"Amount"})}),Object(w.jsx)(g.a,{children:Object(w.jsx)("input",{type:"number",step:"any",min:"0",placeholder:"Amount",ref:i({required:!0}),name:"amount",id:"amount",defaultValue:H.amount})})]})]}),Object(w.jsxs)(p.a.Footer,{children:[Object(w.jsx)(x.a,{variant:"secondary",onClick:Z,children:"Close"}),Object(w.jsx)(x.a,{variant:q?"success":"primary",type:"submit",children:q?"Save Record":"Add Record"})]})]})})]})}function L(e){var t=e.data;e.i;return Object(w.jsxs)("tr",{children:[Object(w.jsxs)("td",{children:[Object(w.jsx)(A.c,{onClick:function(){return e.onDeleteClick(t.id)}}),Object(w.jsx)(A.a,{onClick:function(){return e.onEditClick(t)}})]}),Object(w.jsx)("td",{children:Object(C.a)(t.createdAt.toDate(),"yyyy-MM-dd")}),Object(w.jsx)("td",{children:t.description}),Object(w.jsx)("td",{children:t.category.name}),Object(w.jsx)("td",{children:t.amount})]})}function T(){return Object(w.jsx)("h1",{children:"Category Management"})}function B(){return Object(w.jsx)("h1",{children:"Home"})}var R=function(){return Object(w.jsxs)(s.a,{children:[Object(w.jsxs)(o.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",children:[Object(w.jsx)(o.a.Brand,{href:"/",children:"Money Journey"}),Object(w.jsx)(o.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(w.jsxs)(o.a.Collapse,{id:"responsive-navbar-nav",children:[Object(w.jsxs)(d.a,{className:"mr-auto",children:[Object(w.jsx)(d.a.Link,{children:Object(w.jsx)(s.b,{to:"/journal",children:"Journal"})}),Object(w.jsx)(d.a.Link,{href:"/category",children:"Category"}),Object(w.jsxs)(j.a,{title:"Dropdown",id:"collasible-nav-dropdown",children:[Object(w.jsx)(j.a.Item,{href:"#action/3.1",children:"Action"}),Object(w.jsx)(j.a.Item,{href:"#action/3.2",children:"Another action"}),Object(w.jsx)(j.a.Item,{href:"#action/3.3",children:"Something"}),Object(w.jsx)(j.a.Divider,{}),Object(w.jsx)(j.a.Item,{href:"#action/3.4",children:"Separated link"})]})]}),Object(w.jsxs)(d.a,{children:[Object(w.jsx)(d.a.Link,{href:"#deets",children:"More deets"}),Object(w.jsx)(d.a.Link,{eventKey:2,href:"#memes",children:"Sign Out"})]})]})]}),Object(w.jsxs)(l.c,{children:[Object(w.jsx)(l.a,{path:"/journal",children:Object(w.jsx)(E,{})}),Object(w.jsx)(l.a,{path:"/category",children:Object(w.jsx)(T,{})}),Object(w.jsx)(l.a,{path:"/",children:Object(w.jsx)(B,{})})]})]})},M=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,116)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))};i.a.render(Object(w.jsx)(r.a.StrictMode,{children:Object(w.jsx)(R,{})}),document.getElementById("root")),M()}},[[104,1,2]]]);
//# sourceMappingURL=main.9992c0dc.chunk.js.map