(this.webpackJsonpmj=this.webpackJsonpmj||[]).push([[0],{105:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(19),i=n.n(a),o=(n(82),n(115)),d=n(116),j=n(112),s=n(64),l=n(11),u=n(12),b=n.n(u),h=n(27),O=n(18),x=n(71),p=n(74),m=n(114),y=n(73),f=n(75),g=n(40),A=n(28),C=n(67),E=n(113),_=n(60),v=n(76),S=n(72),D=n(47),T=(n(106),n(85),n(3));0===D.a.apps.length&&D.a.initializeApp({apiKey:"AIzaSyBB1VQeCU12rjy_e6Lr2DREmXtvEc5ZoRI",authDomain:"money-journey-jiahuiouyang.firebaseapp.com",databaseUrl:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyBB1VQeCU12rjy_e6Lr2DREmXtvEc5ZoRI",REACT_APP_AUTH_DOMAIN:"money-journey-jiahuiouyang.firebaseapp.com",REACT_APP_DATEBASE_URL:"https://money-journey-jiahuiouyang-default-rtdb.firebaseio.com/",REACT_APP_PROJECT_ID:"money-journey-jiahuiouyang",REACT_APP_STORAGE_BUCKET:"money-journey-jiahuiouyang.appspot.com",REACT_APP_MESSAGING_SENDER_ID:"224576104559",REACT_APP_APP_ID:"1:224576104559:web:51c21d53cd9b3c4d2fc59a"}).REACT_APP_DATABASE_URL,projectId:"money-journey-jiahuiouyang",storageBucket:"money-journey-jiahuiouyang.appspot.com",messagingSenderId:"224576104559",appId:"1:224576104559:web:51c21d53cd9b3c4d2fc59a"});var P=D.a.firestore(),R=(D.a.auth(),[{id:0,name:"-- All --"},{id:1,name:"Food"},{id:2,name:"Fun"},{id:3,name:"Transportation"},{id:4,name:"Uncategorised"}]);function k(){var e=Object(c.useState)(),t=Object(O.a)(e,2),n=t[0],r=t[1],a=Object(v.a)(),i=a.register,o=a.handleSubmit,d=Object(c.useState)(!1),j=Object(O.a)(d,2),s=j[0],l=j[1],u=Object(c.useState)([]),D=Object(O.a)(u,2),k=D[0],w=D[1],F=Object(c.useState)(0),B=Object(O.a)(F,2),L=B[0],U=B[1],M=Object(c.useState)(!1),N=Object(O.a)(M,2),V=N[0],J=N[1],H=Object(c.useState)({id:null,createdAt:new Date,description:"",amount:0,category:R[0]}),K=Object(O.a)(H,2),q=K[0],G=K[1],z=P.collection("money"),W=z.orderBy("createdAt","asc").limitToLast(100),Q=Object(S.a)(W,{idField:"id"}),X=Object(O.a)(Q,1)[0];console.log("REACT_APP_PROJECT_ID","money-journey-jiahuiouyang"),Object(c.useEffect)((function(){if(X){var e=0,t=X.map((function(t,n){return e+=t.amount,Object(T.jsx)(I,{data:t,i:n,onDeleteClick:$,onEditClick:ee})}));w(t),U(e)}}),[X]);var Z=function(){G({id:null,createdAt:new Date,description:"",amount:0,category:R[0]}),r({}),l(!1),J(!1)},Y=function(){var e=Object(h.a)(b.a.mark((function e(t){var c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c={description:t.description,amount:parseFloat(t.amount),createdAt:new Date(t.createdAt),category:n},console.log("onSubmit",c),!V){e.next=8;break}return console.log("UPDATING!!!!",t.id),e.next=6,z.doc(t.id).set(c).then((function(){return console.log("moneyRef has been set")})).catch((function(e){console.error("Error: ",e),alert(e)}));case 6:e.next=10;break;case 8:return e.next=10,z.add(c).then((function(){return console.log("New record has been added.")})).catch((function(e){console.error("Errror:",e),alert(e)}));case 10:Z();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(e){for(;Object(x.a)("category"),n="Uncategorised";)console.log("handleDeleteClick in Journal",e);window.confirm("Are you sure to delete this record?")&&z.doc(e).delete()},ee=function(e){var t={id:e.id,description:e.description,amount:parseFloat(e.amount),createdAt:e.createdAt.toDate(),category:n};console.log("handleEditClick",t),G(t),r(e.category),l(!0),J(!0)};return Object(T.jsxs)(y.a,{children:[Object(T.jsxs)(g.a,{children:[Object(T.jsxs)(A.a,{children:[Object(T.jsx)("h1",{children:"Journal"}),Object(T.jsxs)(p.a,{variant:"outline-dark",onClick:function(){return l(!0)},children:[Object(T.jsx)(_.b,{})," Add"]})]}),Object(T.jsxs)(A.a,{children:["Category:",Object(T.jsx)(C.a,{options:R,getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id},onChange:function(e){if(console.log("filter",e),X){var t=0,n=X.filter((function(t){return 0==e.id||t.category.id==e.id})).map((function(e,n){return console.log("filter",e),t+=e.amount,Object(T.jsx)(I,{data:e,i:n})}));w(n),U(t)}}})]})]}),Object(T.jsxs)(f.a,{striped:!0,bordered:!0,hover:!0,variant:"dark",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"#"}),Object(T.jsx)("th",{children:"Date"}),Object(T.jsx)("th",{children:"Description"}),Object(T.jsx)("th",{children:"Category"}),Object(T.jsx)("th",{children:"Amount"})]})}),Object(T.jsx)("tbody",{children:k}),Object(T.jsx)("tfooter",{children:Object(T.jsx)("td",{colSpan:5,children:Object(T.jsxs)("h2",{children:["Total: ",L]})})})]}),Object(T.jsx)(m.a,{show:s,onHide:Z,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:Object(T.jsxs)("form",{onSubmit:o(Y),children:[Object(T.jsx)("input",{type:"hidden",placeholder:"ID",ref:i({required:!1}),name:"id",id:"id",defaultValue:q.id}),Object(T.jsx)(m.a.Header,{closeButton:!0,children:Object(T.jsx)(m.a.Title,{children:V?"Edit Record":"Add New Record"})}),Object(T.jsxs)(m.a.Body,{children:[Object(T.jsxs)(g.a,{children:[Object(T.jsx)(A.a,{children:Object(T.jsx)("label",{htmlFor:"createdAt",children:"Date"})}),Object(T.jsx)(A.a,{children:Object(T.jsx)("input",{type:"date",placeholder:"Date",ref:i({required:!0}),name:"createdAt",id:"createdAt",defaultValue:Object(E.a)(q.createdAt,"yyyy-MM-dd")})})]}),Object(T.jsxs)(g.a,{children:[Object(T.jsx)(A.a,{children:Object(T.jsx)("label",{htmlFor:"category",children:"Category"})}),Object(T.jsx)(A.a,{children:Object(T.jsx)(C.a,{id:"category",name:"category",value:n,placeholder:"Category",options:R.filter((function(e){return 0!=e.id})),onChange:function(e){console.log("handleCategoryChange",e),r(e)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}})})]}),Object(T.jsxs)(g.a,{children:[Object(T.jsx)(A.a,{children:Object(T.jsx)("label",{htmlFor:"description",children:"Description"})}),Object(T.jsx)(A.a,{children:Object(T.jsx)("input",{type:"text",placeholder:"Description",ref:i({required:!0}),name:"description",id:"description",defaultValue:q.description})})]}),Object(T.jsxs)(g.a,{children:[Object(T.jsx)(A.a,{children:Object(T.jsx)("label",{htmlFor:"amount",children:"Amount"})}),Object(T.jsx)(A.a,{children:Object(T.jsx)("input",{type:"number",step:"any",min:"0",placeholder:"Amount",ref:i({required:!0}),name:"amount",id:"amount",defaultValue:q.amount})})]})]}),Object(T.jsxs)(m.a.Footer,{children:[Object(T.jsx)(p.a,{variant:"secondary",onClick:Z,children:"Close"}),Object(T.jsx)(p.a,{variant:V?"success":"primary",type:"submit",children:V?"Save Record":"Add Record"})]})]})})]})}function I(e){var t=e.data;e.i;return Object(T.jsxs)("tr",{children:[Object(T.jsxs)("td",{children:[Object(T.jsx)(_.c,{onClick:function(){return e.onDeleteClick(t.id)}}),Object(T.jsx)(_.a,{onClick:function(){return e.onEditClick(t)}})]}),Object(T.jsx)("td",{children:Object(E.a)(t.createdAt.toDate(),"yyyy-MM-dd")}),Object(T.jsx)("td",{children:t.description}),Object(T.jsx)("td",{children:t.category.name}),Object(T.jsx)("td",{children:t.amount})]})}function w(){return Object(T.jsx)("h1",{children:"Category Management"})}function F(){return Object(T.jsx)("h1",{children:"Home"})}var B=function(){return Object(T.jsxs)(s.a,{children:[Object(T.jsxs)(o.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",children:[Object(T.jsx)(o.a.Brand,{href:"/",children:"Money Journey"}),Object(T.jsx)(o.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(T.jsxs)(o.a.Collapse,{id:"responsive-navbar-nav",children:[Object(T.jsxs)(d.a,{className:"mr-auto",children:[Object(T.jsx)(d.a.Link,{children:Object(T.jsx)(s.b,{to:"/journal",children:"Journal"})}),Object(T.jsx)(d.a.Link,{href:"/category",children:"Category"}),Object(T.jsxs)(j.a,{title:"Dropdown",id:"collasible-nav-dropdown",children:[Object(T.jsx)(j.a.Item,{href:"#action/3.1",children:"Action"}),Object(T.jsx)(j.a.Item,{href:"#action/3.2",children:"Another action"}),Object(T.jsx)(j.a.Item,{href:"#action/3.3",children:"Something"}),Object(T.jsx)(j.a.Divider,{}),Object(T.jsx)(j.a.Item,{href:"#action/3.4",children:"Separated link"})]})]}),Object(T.jsxs)(d.a,{children:[Object(T.jsx)(d.a.Link,{href:"#deets",children:"More deets"}),Object(T.jsx)(d.a.Link,{eventKey:2,href:"#memes",children:"Sign Out"})]})]})]}),Object(T.jsxs)(l.c,{children:[Object(T.jsx)(l.a,{path:"/journal",children:Object(T.jsx)(k,{})}),Object(T.jsx)(l.a,{path:"/category",children:Object(T.jsx)(w,{})}),Object(T.jsx)(l.a,{path:"/",children:Object(T.jsx)(F,{})})]})]})},L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,117)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))};i.a.render(Object(T.jsx)(r.a.StrictMode,{children:Object(T.jsx)(B,{})}),document.getElementById("root")),L()}},[[105,1,2]]]);
//# sourceMappingURL=main.679a7bea.chunk.js.map